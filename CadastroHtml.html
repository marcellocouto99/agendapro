<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <title>Cadastro AgendaPro</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'> 
        <link rel="stylesheet" href="LoginStyle.css">

    </head>
    <body>
        <main class="auth">
        <div class="logo">
            <img src="./img/Logo AgendaPro.png" alt="AgendaPro">
        </div>
        <div class="container">
            <div class="card">
                <h1>Cadastre-se</h1> 
                <div class="input-box">
                    <label for="nome">Nome/Raz√£o Social</label>
                    <input type="text" id="nome" placeholder="">
                </div>

                <div class="input-box">
                    <label for="email">E-mail</label>
                    <input type="email" id="E-mail" placeholder="exemplo@dominio.com">
                </div>

                 <div class="input-box">
                    <label for="fone">Telefone</label>
                    <input type="tel" id="fone" placeholder="(11) 98765-4321" maxlength="15">
                </div>

                <div class="input-box">
                    <label for="cpfCnpj">CPF/CNPJ</label>
                    <input type="text" id="cpfCnpj" placeholder="000.000.000-00 ou 00.000.000/0000-00" maxlength="18">
                </div>


                <div class="input-box">
                    <label for="usuario">Senha</label>
                    <input type="password" id="senha" placeholder="">

                </div>

                  <div class="input-box">
                    <label for="usuario">Confirme sua Senha</label>
                    <input type="password" id="confirmSenha" placeholder="">
                </div>

                    <button type="submit" class="cadastrar">Cadastrar</button>

                <div class="register-link">
                    <p>J√° possui uma conta?<a href="index.html"> Clique Aqui</a></p>
                </div>
        </div>
    </main>

    <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

  // üî• Configura√ß√£o do Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBihcx1ihMSs7egInoGOzV1mWIw9D8LUzw",
    authDomain: "agendapro-f6ecc.firebaseapp.com",
    projectId: "agendapro-f6ecc",
    storageBucket: "agendapro-f6ecc.firebasestorage.app",
    messagingSenderId: "1045418539073",
    appId: "1:1045418539073:web:aa920e129ece148c0feec0"
  };

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // üéØ Evento do bot√£o cadastrar
  document.querySelector(".cadastrar").addEventListener("click", async (e) => {
    e.preventDefault();

    const nome  = document.getElementById("nome").value;
    const email = document.getElementById("E-mail").value;
    const fone  = document.getElementById("fone").value;
    const cpfCnpj = document.getElementById("cpfCnpj").value;
    const senha = document.getElementById("senha").value;
    const confirmSenha = document.getElementById("confirmSenha").value;

    if (senha !== confirmSenha) {
      alert("As senhas n√£o coincidem!");
      return;
    }

    try {
      // Cria usu√°rio no Authentication
      const userCredential = await createUserWithEmailAndPassword(auth, email, senha);
      const user = userCredential.user;

      // Salva dados extras no Firestore
      await addDoc(collection(db, "usuarios"), {
        uid: user.uid,
        nome,
        email,
        fone,
        cpfCnpj,
        criadoEm: new Date()
      });

      alert("Cadastro realizado com sucesso!");
      window.location.href = "index.html"; // redireciona pro login
    } catch (error) {
      console.error("Erro ao cadastrar:", error);
      alert("Erro ao cadastrar: " + error.message);
    }
  });
</script>


<script src="CadastroScript.js"></script>
    </body>

</html>
