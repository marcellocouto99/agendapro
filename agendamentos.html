<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Agendamentos PitStop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="menu.css">
    <link rel="stylesheet" href="dados.css">
    <link rel="stylesheet" href="calendario.css">
</head>
<body>
    <div class="logo"> 
        <img src="img/LogoPitstop.png" alt="Logo" 
             style="margin-top: 20px; display: block; margin-left: auto; margin-right: auto;" 
             width="200" height="200">
    </div>  

    <h1 class="titulo">Agenda Cautelar<br>Colorado</h1>
    <h6 class="subtitulo">Agende seu horário de forma rápida e fácil!</h6>

    <div class="container">
        <!-- Calendar Section -->
        <div class="calendar-section">
            <h2 class="section-title">1. Escolha a Data</h2>
            <div class="calendar-container">
                <!-- Month Navigation -->
                <div class="month-navigation">
                    <button class="nav-btn prev-btn" id="prevMonth">&lt;</button>
                    <div class="month-year" id="monthYear">JULHO 2025</div>
                    <button class="nav-btn next-btn" id="nextMonth">&gt;</button>
                </div>
                <!-- Days of Week -->
                <div class="days-header">
                    <div class="day-header">D</div>
                    <div class="day-header">S</div>
                    <div class="day-header">T</div>
                    <div class="day-header">Q</div>
                    <div class="day-header">Q</div>
                    <div class="day-header">S</div>
                    <div class="day-header">S</div>
                </div>
                <!-- Calendar Grid -->
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </div>

        <!-- Time Selection Section -->
        <div class="time-section">
            <h2 class="section-title">2. Escolha o Horário</h2>
            <div class="time-container">
                <div class="time-slots" id="timeSlots">
                    <button class="time-slot" data-time="09:00">09:00</button>
                    <button class="time-slot" data-time="10:00">10:00</button>
                    <button class="time-slot" data-time="11:00">11:00</button>
                    <button class="time-slot" data-time="14:00">14:00</button>
                    <button class="time-slot" data-time="15:00">15:00</button>
                    <button class="time-slot" data-time="16:00">16:00</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulário Seus Dados -->
    <div class="dados.section">
        <h2 class="title-Dados">3. Seus Dados</h2>
        <div class="pitstop-form-wrapper">
            <form id="pitstopDadosForm" class="pitstop-dados-form">
                <div class="pitstop-form-group">
                    <label for="pitstopNome" class="pitstop-form-label">Nome *</label>
                    <input type="text" id="pitstopNome" name="nome" class="pitstop-form-input" required placeholder="Digite seu nome completo">
                    <span class="pitstop-error-message" id="pitstopNome-error"></span>
                </div>
                <div class="pitstop-form-group">
                    <label for="pitstopPlaca" class="pitstop-form-label">Placa do Veículo *</label>
                    <input type="text" id="pitstopPlaca" name="placa" class="pitstop-form-input" required placeholder="ABC-1234" maxlength="8">
                    <span class="pitstop-error-message" id="pitstopPlaca-error"></span>
                </div>
                <div class="pitstop-form-group">
                    <label for="pitstopLoja" class="pitstop-form-label">Loja *</label>
                    <select id="pitstopLoja" name="loja" class="pitstop-form-select" required>
                        <option value="">Selecione...</option>
                        <option value="loja1">Fiat</option>
                        <option value="loja2">Jeep</option>
                        <option value="loja3">Nissan</option>
                        <option value="loja4">Seminovos</option>
                        <option value="loja5">Toyota</option>
                    </select>
                    <span class="pitstop-error-message" id="pitstopLoja-error"></span>
                </div>
                <button type="submit" class="pitstop-confirm-button">Confirmar Agendamento</button>
            </form>
        </div>
        <div class="pitstop-footer">
            <span class="pitstop-made-with">AgendaPro</span>
        </div>
    </div>

    <!-- MENU lateral -->
    <nav class="menu-lateral">
        <div class="btn-expandir">
            <i class="bi bi-list" id="btn-exp"></i>
        </div>
        <ul>
            <li class="item-menu"><a href="calendario.html"><span class="icon"><i class="bi bi-calendar3"></i></span><span class="txt-link">Calendário</span></a></li>
            <li class="item-menu ativo"><a href="#"><span class="icon"><i class="bi bi-file-earmark-check"></i></span><span class="txt-link">Agendamento</span></a></li>
            <li class="item-menu"><a href="#"><span class="icon"><i class="bi bi-gear"></i></span><span class="txt-link">Configuração</span></a></li>
            <li class="item-menu"><a href="edicao.html"><span class="icon"><i class="bi bi-pencil-square"></i></span><span class="txt-link">Editar</span></a></li>
            <li class="item-menu"><a href="#"><span class="icon"><i class="bi bi-person-circle"></i></span><span class="txt-link">Conta</span></a></li>
            <li class="item-menu">
                <a href="#" id="logoutBtn">
                    <span class="icon"><i class="bi bi-box-arrow-right"></i></span>
                    <span class="txt-link">Sair</span>
                </a>
            </li>
            <li class="logo-item">
                <span class="icon"><img src="img/LogoAgendaPro.png" alt="Logo AgendaPro" class="logo-agendapro"></span>
                <span class="logo-text">AgendaPro</span>
            </li>
        </ul>
    </nav>

    <!-- Firebase + Logout -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
      import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBihcx1ihMSs7egInoGOzV1mWIw9D8LUzw",
        authDomain: "agendapro-f6ecc.firebaseapp.com",
        projectId: "agendapro-f6ecc",
        storageBucket: "agendapro-f6ecc.firebasestorage.app",
        messagingSenderId: "1045418539073",
        appId: "1:1045418539073:web:aa920e129ece148c0feec0"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // Protege página
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          window.location.href = "index.html";
        }
      });

      // Logout
      const logoutBtn = document.getElementById("logoutBtn");
      logoutBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        try {
          await signOut(auth);
          alert("Você saiu da conta!");
          window.location.href = "index.html";
        } catch (error) {
          console.error("Erro ao sair:", error);
        }
      });
    </script>

    <script src="script.js"></script>
    <script src="menu.js"></script>
    <script src="dados.js"></script>
</body>
</html>
